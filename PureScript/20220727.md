# Chapter 7. Applicative Validation

## Chapter goals
- `Applicative` 타입 클래스는 applicative functor를 describe한다. 
  - 보일러 플레이트를 많이 동반하는 검사(폼 데이터 유효성 검사) 코드를 단순하고 선언적으로 작성할 수 있게 해주는 기술
- `Traversable`이라는 타입 클래스는 `traversable functors`를 설명

## Generalizing Function Application
- `address` 함수는 인자 타입 `String` 만 받으므로 `Maybe` 타입을 넣을 경우 에러를 뱉는다. 그러나 `address` 함수가 요구하는 모든 것을 가지고 있지 않은 경우는?
- optional values로도 `address` 함수를 사용할 수 있도록 `lift`해준다면? 
  - `Control.Apply`의 `lift3`이 그 역할을 해줄 것
  - 하나라도 값이 `Maybe`이면 `Nothing`을 뱉는다.
  - 모든 인자가 다 값을 가지면 `Just` 생성자를 통해 리턴값을 뱉는다.
  - `lift3`의 3은 3개 인자를 받는다는 것을 의미

## Lifting Arbitrary Functions
- 적은 수의 인자를 받는 함수들에 대해서는 이렇게 `lift+숫자` 함수를 사용할 수 있지만 모든 함수에 대해 어떻게 이것을 적용할 수 있을까?
- `lift3`의 타입을 보자
```
> :type lift3
forall a b c d f. Apply f => (a -> b -> c -> d) -> f a -> f b -> f c -> f d
```
- 위의 예에서 `Maybe`는 f에 해당, 다음과 같다.
```
forall a b c d. (a -> b -> c -> d) -> Maybe a -> Maybe b -> Maybe c -> Maybe d
```
- 어떤 함수든 arguments 세 개를 받아 `Maybe` 타입의 인자를 받아 반환값을 리턴하도록 하는 새로운 함수로 lift!
- 그러나 모든 함수가 다 `Maybe` 처럼 lift가 가능한 것은 아니다. Apply에 정의된 f에 올 수 있는 타입은 아래와 같다.
```
class Functor f where
  map :: forall a b. (a -> b) -> f a -> f b

class Functor f <= Apply f where
  apply :: forall a b. f (a -> b) -> f a -> f b
```
- `map` vs. `apply`
  - `map`은 함수를 '인자'로 받고, `apply`는 타입 생성자 f로 감싸진 첫 인자를 받는다.
  - This type class instance says that we can apply an optional function to an optional value, and the result is defined only if both are defined.
  - 인자가 하나인 함수의 경우 `map`을 사용할 수 있다.
  - 인자가 두 개인 함수의 경우 `map`에 커링 함수인 `a -> b -> c`에 대하여 `apply (map g x) y)`로 만들 수 있다.
  - `<$>`를 쓰고 그 이후 `<*>`를 연속적으로 사용하여 표현할 수 있다.

## The Applicative Type Class
```
class Apply f <= Applicative f where
  pure :: forall a. a -> f a
```
- `pure`함수는 값을 전달받아 f 타입 생성자로 감싸진 타입의 값을 리턴한다.
- applicative functor가 함수들을 lifting한다고 하면, pure은 인자가 없는 함수를 lifting 한다고 할 수 있다.

## Intuition for Applicative
- Applicative Functors는 부수효과를 허용하지 않는 퓨어스크립트의 함수들이, f로 인코딩된 특정 부수효과들을 지원하는 더 넓은 프로그래밍 언어에서 사용될 수 있도록 한다.

## More Effects
- 파라미터가 invalid한 경우 에러 응답을 보낼 수 있게 된다.
- 어떤 필드가 빈 값인지 확인

  
## Combining Effects
## Applicative Validation
## Regular Expression Validators
## Traversable Functors
## Applicative Functors for Parallelism

## Conclusion
- 


## 소감

## 질문

## 스터디 (2022.07.27)에서 나온 내용
