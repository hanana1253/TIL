# Chapter 11. Monadic Adventures

범위: Monad Transformers ~ Monad Transformer Stacks

## Monad Transformers

- `State`, `Reader`, `Writer` 모나드는 `monad transformers`라 불리는 것의 예시로, 각각 상응하는 `monad transformers`는 `StateT`, `ReaderT`, `WriterT`라고 불린다.
- `Monad Transformers`: 여러 개의 부수 효과를 한 번에 사용할 수 있게 한다. 
  - Reader + Maybe : 전역 설정에서의 optional result를 표현
  - State + Either : 에러 추적하면서 가변 상태를 표현
  - 모나드로는 적절한 핸들러를 통해 언어를 확장시킴으로써 **하나의 부수효과**를 잘 다룰 수 있었다 (runState, runReader, runWriter)
- Effect 모나드가 이런 것을 부분적으로 해결해줄 수 있지만, Monad transformers는 또다른 해결방식을 제공하며, 각각의 방식이 장단점이 있다.
- Power of monad transformers : 우리가 필요한 부수효과를 선택하고 do notation과 applicative combinators의 표현성을 유지하면서 직접 문제해결을 위한 모나드를 만들 수 있다.
  - split 함수를 만드는 예제: 여러 번 사용하여 파싱을 할 수 있으며 이것이 parsing 라이브러리의 접근방식 


## The ExceptT Monad Transformer

- `transformers` package에서 `ExceptT e` monad transformer을 정의하는데, 이는 `Either e` 모나드에 해당하는 트랜스포머.
```purescript
class MonadError e m where
  throwError :: forall a. e -> m a
  catchError :: forall a. m a -> (e -> m a) -> m a

instance monadErrorExceptT :: Monad m => MonadError e (ExceptT e m)

runExceptT :: forall e m a. ExceptT e m a -> m (Either e a)
```
- `MonadError` 클래스는 e 타입의 에러를 던지거나 잡는 모나드를 의미하며 이 클래스의 인스턴스는 `ExceptT e` 모나드 트랜스포머에 제공
- `exceptions` package와 `Exception` effect랑 비슷하지만, 주요 차이점이 있다.
  - `Exception`은 실제 JS의 exceptions를 사용 vs. `ExceptT`는 에러를 순수한 데이터구조로 모델링한다.(????????????)
  - `Exception` effect는 하나의 타입에 대한 예외만 지원 (JS의 `Error` type) vs. `ExceptT`는 모든 타입의 에러를 지원하므로 새로운 에러 타입을 정의할 수 있다.

## Monad Transformer Stacks

- 

## 
## 
## 
## 