# Bootcamp Day 11

Rescript 웹페이지 클론 코딩 

## 오늘 한 일
- filter 만들기 위한 keywords 받아서 렌더링하기
- query string 변경하는 routing 로직 작성

## 배운 것들

### Relay & GraphQL
- endCursor과 startCursor이 non-nullable인데 edges가 빈 배열로 와서 생기는 문제  
  ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4ab095ec-33ad-46a8-9e44-bb13f74211ad/Untitled.png)
  - 정해진 crop과 keyword를 쿼리요청하면 빈 배열이 올 수 없도록 설정해두었으므로 이것은 crop, keyword 필드를 제대로 보내기만 하면 해결될 것
- [rescript-relay가 제공](https://rescript-relay-documentation.vercel.app/docs/pagination#pagination-in-a-component)하는 `getConnectionNodes`를 활용하면 connection에 연결된 node들을 non-nullable로 바로 가져오므로 패턴 매칭 depth를 하나 줄이고 간편히 사용할 수 있다.
  ```res
  /**
   * Any time you use the @connection directive in a fragment, a function will be autogenerated
   * that help you turn that connection into an array of non-nullable nodes. That function will
   * be exposed right on the fragment module, and called `getConnectionNodes`.
   */
  let tickets = data.ticketsConnection->Fragment.getConnectionNodes
  ```
- `usePagination`에서 `loadNext` 호출할 때 기존 데이터 위에 쌓이는 이유?
  - `loadNext`로 새로운 data를 fetch하면 relay는 redux처럼 store에 data를 쌓는다.
  - 우리는 무한스크롤이니까 그대로 사용하면 되고, 기존 데이터 있던 자리에 새로운 데이터를 보여주도록 button을 통해 제어하려면 slice해서 쓰기

### Git과 기타 질문
- `$ git pull --rebase`를 통해 merge commit을 남기지 않고 rebase를 한 후 push할 수 있다.
- 기존 코드에 있는 `gtmDict` 및 `convertKeywordToGtm`은 무엇인가?
  - 마케팅 정보 수집을 위해 문자열 변경하기 위한 튜플 및 함수이므로 신경쓰지 않아도 된다.

## 피드백
- 작업을 작게 나눠서 써두고 하나씩 하기
  - 먼저 목록 렌더링 하고, 그 이후에 필터를 적용하는 등으로 차례차례 해 볼 것
  - commit도 작은 단위로 나눠서 하기
- 무한 스크롤 어떻게 구현할지 고민해보기
  - 현재 intersection observer 사용하고 있는데 어떤 기준으로 refetch할까

## 느낀 점
- 쉬운 것부터 하나하나 했어야 했는데, 우선순위를 잘못 잡아서 어려워졌다는 것을 깨달았다.

## TO DO
- [ ] 무한 스크롤 원리 파악하고 적용해보기
- [ ] tailwind css 활용 스타일링